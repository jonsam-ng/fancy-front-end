<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React æºç æ¼‚æµè®°ï¼šReact è°ƒå’Œå™¨æ ¸å¿ƒæºç è§£è¯»ï¼ˆä¸€ï¼‰ | Fancy Front End</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/assets/img/favicon.ico">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_3314748_9xij1pv3h4i.css">
    <meta name="description" content="å‰ç«¯æºç é˜…è¯»æ ˆï¼Œç²¾è¯» Reactã€Vue3 æºç ">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="keywords" content="å‰ç«¯æºç ,Reactæºç ,Vueæºç ,Vu3æºç ,Webpackæºç ">
    <meta name="theme-color" content="#3CB982">
    
    <link rel="preload" href="/assets/css/0.styles.e2349a00.css" as="style"><link rel="preload" href="/assets/js/app.eb21b6ee.js" as="script"><link rel="preload" href="/assets/js/2.01e091c2.js" as="script"><link rel="preload" href="/assets/js/62.d83f3691.js" as="script"><link rel="preload" href="/assets/js/4.54e60667.js" as="script"><link rel="preload" href="/assets/js/12.71337abb.js" as="script"><link rel="preload" href="/assets/js/10.ac472f43.js" as="script"><link rel="preload" href="/assets/js/11.c50183f9.js" as="script"><link rel="preload" href="/assets/js/8.7cbef5ec.js" as="script"><link rel="preload" href="/assets/js/5.f620477b.js" as="script"><link rel="prefetch" href="/assets/js/100.8081075e.js"><link rel="prefetch" href="/assets/js/101.943ea683.js"><link rel="prefetch" href="/assets/js/102.11c8554c.js"><link rel="prefetch" href="/assets/js/103.c2780521.js"><link rel="prefetch" href="/assets/js/104.81994794.js"><link rel="prefetch" href="/assets/js/105.f987244b.js"><link rel="prefetch" href="/assets/js/106.235a578e.js"><link rel="prefetch" href="/assets/js/107.94cdbb18.js"><link rel="prefetch" href="/assets/js/108.3a80cb29.js"><link rel="prefetch" href="/assets/js/109.8884be03.js"><link rel="prefetch" href="/assets/js/110.89ab5eb2.js"><link rel="prefetch" href="/assets/js/111.355b1782.js"><link rel="prefetch" href="/assets/js/112.34671c87.js"><link rel="prefetch" href="/assets/js/113.0cca0902.js"><link rel="prefetch" href="/assets/js/114.01616168.js"><link rel="prefetch" href="/assets/js/115.4915c0b5.js"><link rel="prefetch" href="/assets/js/116.ef93855a.js"><link rel="prefetch" href="/assets/js/117.e3526ed0.js"><link rel="prefetch" href="/assets/js/118.7d52a4ea.js"><link rel="prefetch" href="/assets/js/119.a4bb17bb.js"><link rel="prefetch" href="/assets/js/120.135aa6ea.js"><link rel="prefetch" href="/assets/js/121.86c35c15.js"><link rel="prefetch" href="/assets/js/122.1452986d.js"><link rel="prefetch" href="/assets/js/123.0181b553.js"><link rel="prefetch" href="/assets/js/124.edc508f8.js"><link rel="prefetch" href="/assets/js/125.46d932c1.js"><link rel="prefetch" href="/assets/js/126.17e05a12.js"><link rel="prefetch" href="/assets/js/127.98159dfe.js"><link rel="prefetch" href="/assets/js/128.9aaa5bc6.js"><link rel="prefetch" href="/assets/js/129.26bed928.js"><link rel="prefetch" href="/assets/js/13.292db5f6.js"><link rel="prefetch" href="/assets/js/130.9f74c846.js"><link rel="prefetch" href="/assets/js/131.d6ef0885.js"><link rel="prefetch" href="/assets/js/132.1d9ee075.js"><link rel="prefetch" href="/assets/js/133.2b23ed7b.js"><link rel="prefetch" href="/assets/js/134.c47e8a23.js"><link rel="prefetch" href="/assets/js/135.2aeb3426.js"><link rel="prefetch" href="/assets/js/136.0169c47b.js"><link rel="prefetch" href="/assets/js/137.70cdfc24.js"><link rel="prefetch" href="/assets/js/138.e54160ee.js"><link rel="prefetch" href="/assets/js/139.9a6d1932.js"><link rel="prefetch" href="/assets/js/14.54d2636a.js"><link rel="prefetch" href="/assets/js/140.ddabaeca.js"><link rel="prefetch" href="/assets/js/141.35844ecc.js"><link rel="prefetch" href="/assets/js/142.4ccdb5e4.js"><link rel="prefetch" href="/assets/js/143.37a7f36e.js"><link rel="prefetch" href="/assets/js/144.95ff6a63.js"><link rel="prefetch" href="/assets/js/145.9899e545.js"><link rel="prefetch" href="/assets/js/146.6865658b.js"><link rel="prefetch" href="/assets/js/147.2a55d18a.js"><link rel="prefetch" href="/assets/js/148.f3aab640.js"><link rel="prefetch" href="/assets/js/149.57b565a0.js"><link rel="prefetch" href="/assets/js/15.81d908ff.js"><link rel="prefetch" href="/assets/js/150.3f7143ae.js"><link rel="prefetch" href="/assets/js/151.5981cf9e.js"><link rel="prefetch" href="/assets/js/152.a3428a7b.js"><link rel="prefetch" href="/assets/js/153.0f0b339d.js"><link rel="prefetch" href="/assets/js/154.39f3b522.js"><link rel="prefetch" href="/assets/js/155.13c8170a.js"><link rel="prefetch" href="/assets/js/156.ccb66614.js"><link rel="prefetch" href="/assets/js/157.4b8bce50.js"><link rel="prefetch" href="/assets/js/158.6476dd1c.js"><link rel="prefetch" href="/assets/js/159.b261a009.js"><link rel="prefetch" href="/assets/js/16.68d8e787.js"><link rel="prefetch" href="/assets/js/160.e501007d.js"><link rel="prefetch" href="/assets/js/161.d3f56d3d.js"><link rel="prefetch" href="/assets/js/162.f8590797.js"><link rel="prefetch" href="/assets/js/163.91fe4509.js"><link rel="prefetch" href="/assets/js/164.6e92f3f4.js"><link rel="prefetch" href="/assets/js/165.56868a39.js"><link rel="prefetch" href="/assets/js/166.83812a3b.js"><link rel="prefetch" href="/assets/js/167.4b528df4.js"><link rel="prefetch" href="/assets/js/168.f2b151fb.js"><link rel="prefetch" href="/assets/js/169.cb2ee128.js"><link rel="prefetch" href="/assets/js/17.895175dc.js"><link rel="prefetch" href="/assets/js/170.63b574e9.js"><link rel="prefetch" href="/assets/js/171.ad38a311.js"><link rel="prefetch" href="/assets/js/172.b592b97e.js"><link rel="prefetch" href="/assets/js/173.302ef08b.js"><link rel="prefetch" href="/assets/js/174.d71ad1a3.js"><link rel="prefetch" href="/assets/js/175.2617c860.js"><link rel="prefetch" href="/assets/js/176.19a67035.js"><link rel="prefetch" href="/assets/js/177.75aab37d.js"><link rel="prefetch" href="/assets/js/178.b2773712.js"><link rel="prefetch" href="/assets/js/179.6a34b45f.js"><link rel="prefetch" href="/assets/js/18.736b781d.js"><link rel="prefetch" href="/assets/js/180.d447fc48.js"><link rel="prefetch" href="/assets/js/181.d6b96886.js"><link rel="prefetch" href="/assets/js/182.42c2bcd5.js"><link rel="prefetch" href="/assets/js/183.a6256a82.js"><link rel="prefetch" href="/assets/js/184.8a036f5a.js"><link rel="prefetch" href="/assets/js/185.811d5831.js"><link rel="prefetch" href="/assets/js/186.6436a583.js"><link rel="prefetch" href="/assets/js/187.4bcf94a3.js"><link rel="prefetch" href="/assets/js/188.33f39bd6.js"><link rel="prefetch" href="/assets/js/189.c1b90840.js"><link rel="prefetch" href="/assets/js/19.504bd141.js"><link rel="prefetch" href="/assets/js/20.e526fb51.js"><link rel="prefetch" href="/assets/js/21.8375d39e.js"><link rel="prefetch" href="/assets/js/22.0e15b626.js"><link rel="prefetch" href="/assets/js/23.83bcc15c.js"><link rel="prefetch" href="/assets/js/24.3df554ce.js"><link rel="prefetch" href="/assets/js/25.6c56da2b.js"><link rel="prefetch" href="/assets/js/26.76154857.js"><link rel="prefetch" href="/assets/js/27.155dbcb4.js"><link rel="prefetch" href="/assets/js/28.7178e96c.js"><link rel="prefetch" href="/assets/js/29.f7337396.js"><link rel="prefetch" href="/assets/js/3.50570587.js"><link rel="prefetch" href="/assets/js/30.191545d3.js"><link rel="prefetch" href="/assets/js/31.b6a0fe90.js"><link rel="prefetch" href="/assets/js/32.18cebeab.js"><link rel="prefetch" href="/assets/js/33.146782c3.js"><link rel="prefetch" href="/assets/js/34.c08af9cb.js"><link rel="prefetch" href="/assets/js/35.ea730de0.js"><link rel="prefetch" href="/assets/js/36.11aba0b0.js"><link rel="prefetch" href="/assets/js/37.0fd8e20a.js"><link rel="prefetch" href="/assets/js/38.2cde6902.js"><link rel="prefetch" href="/assets/js/39.07c230cc.js"><link rel="prefetch" href="/assets/js/40.e4fcccd0.js"><link rel="prefetch" href="/assets/js/41.5f96c201.js"><link rel="prefetch" href="/assets/js/42.e5023440.js"><link rel="prefetch" href="/assets/js/43.2cfdc8d9.js"><link rel="prefetch" href="/assets/js/44.37f32c52.js"><link rel="prefetch" href="/assets/js/45.3973ea4b.js"><link rel="prefetch" href="/assets/js/46.87541312.js"><link rel="prefetch" href="/assets/js/47.04f0011f.js"><link rel="prefetch" href="/assets/js/48.1151f311.js"><link rel="prefetch" href="/assets/js/49.6830fb0c.js"><link rel="prefetch" href="/assets/js/50.84b34574.js"><link rel="prefetch" href="/assets/js/51.840f38c4.js"><link rel="prefetch" href="/assets/js/52.3dbda6e7.js"><link rel="prefetch" href="/assets/js/53.7f0a8896.js"><link rel="prefetch" href="/assets/js/54.5d7f6427.js"><link rel="prefetch" href="/assets/js/55.86c7b544.js"><link rel="prefetch" href="/assets/js/56.49a27b9a.js"><link rel="prefetch" href="/assets/js/57.287f9e58.js"><link rel="prefetch" href="/assets/js/58.40a49fdb.js"><link rel="prefetch" href="/assets/js/59.91487422.js"><link rel="prefetch" href="/assets/js/6.8880bb8c.js"><link rel="prefetch" href="/assets/js/60.8dfd58ee.js"><link rel="prefetch" href="/assets/js/61.7b4874b9.js"><link rel="prefetch" href="/assets/js/63.1237a900.js"><link rel="prefetch" href="/assets/js/64.1f096a25.js"><link rel="prefetch" href="/assets/js/65.809d988d.js"><link rel="prefetch" href="/assets/js/66.43c1e5f9.js"><link rel="prefetch" href="/assets/js/67.24ab137d.js"><link rel="prefetch" href="/assets/js/68.7b0346b5.js"><link rel="prefetch" href="/assets/js/69.2008c989.js"><link rel="prefetch" href="/assets/js/7.0c293177.js"><link rel="prefetch" href="/assets/js/70.e8cf3232.js"><link rel="prefetch" href="/assets/js/71.d661943d.js"><link rel="prefetch" href="/assets/js/72.e67a47a3.js"><link rel="prefetch" href="/assets/js/73.87f1db52.js"><link rel="prefetch" href="/assets/js/74.ac67cd0d.js"><link rel="prefetch" href="/assets/js/75.e25ebf69.js"><link rel="prefetch" href="/assets/js/76.a7222468.js"><link rel="prefetch" href="/assets/js/77.ffb71305.js"><link rel="prefetch" href="/assets/js/78.72c00bee.js"><link rel="prefetch" href="/assets/js/79.66ec368e.js"><link rel="prefetch" href="/assets/js/80.8792d3d7.js"><link rel="prefetch" href="/assets/js/81.49d3731a.js"><link rel="prefetch" href="/assets/js/82.fbe09e61.js"><link rel="prefetch" href="/assets/js/83.220a02bb.js"><link rel="prefetch" href="/assets/js/84.4b722410.js"><link rel="prefetch" href="/assets/js/85.f83d2db9.js"><link rel="prefetch" href="/assets/js/86.17b19d53.js"><link rel="prefetch" href="/assets/js/87.37568307.js"><link rel="prefetch" href="/assets/js/88.d7cc6612.js"><link rel="prefetch" href="/assets/js/89.ffb378d0.js"><link rel="prefetch" href="/assets/js/9.2a7e5bdc.js"><link rel="prefetch" href="/assets/js/90.02c91127.js"><link rel="prefetch" href="/assets/js/91.c22d9224.js"><link rel="prefetch" href="/assets/js/92.c79d457a.js"><link rel="prefetch" href="/assets/js/93.33a03732.js"><link rel="prefetch" href="/assets/js/94.c73ddbbc.js"><link rel="prefetch" href="/assets/js/95.a5151497.js"><link rel="prefetch" href="/assets/js/96.b8f204d2.js"><link rel="prefetch" href="/assets/js/97.d7ddaa6f.js"><link rel="prefetch" href="/assets/js/98.49dbda5e.js"><link rel="prefetch" href="/assets/js/99.d14f43ad.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e2349a00.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo.png" alt="Fancy Front End" class="logo"> <span class="site-name can-hide">Fancy Front End</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Reactæºç " class="dropdown-title"><a href="/react/index/" class="link-title">Reactæºç </a> <span class="title" style="display:none;">Reactæºç </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react/index/" class="nav-link">å¼€å§‹ä¸Šæ‰‹</a></li><li class="dropdown-item"><!----> <a href="/react/basic/index/" class="nav-link">åŸºç¡€</a></li><li class="dropdown-item"><!----> <a href="/react/scheduler/index/" class="nav-link">è°ƒåº¦å™¨ï¼ˆSchedulerï¼‰</a></li><li class="dropdown-item"><!----> <a href="/react/updater/index/" class="nav-link">æ›´æ–°å™¨ï¼ˆUpdaterï¼‰</a></li><li class="dropdown-item"><!----> <a href="/react/render/index/" class="nav-link">æ¸²æŸ“å™¨ï¼ˆRenderï¼‰</a></li><li class="dropdown-item"><!----> <a href="/react/update/index/" class="nav-link">æ›´æ–°å‘¨æœŸ</a></li><li class="dropdown-item"><!----> <a href="/react/hooks/index/" class="nav-link">hooks åŸç†</a></li><li class="dropdown-item"><!----> <a href="/react/summary/index/" class="nav-link">æ€»ç»“</a></li><li class="dropdown-item"><!----> <a href="/react/tour/index/" class="nav-link">ğŸ“™ Reactæºç æ¼‚æµè®°</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue3æºç " class="dropdown-title"><a href="/vue3/index/" class="link-title">Vue3æºç </a> <span class="title" style="display:none;">Vue3æºç </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue3/index/" class="nav-link">å¼€å§‹ä¸Šæ‰‹</a></li><li class="dropdown-item"><!----> <a href="/vue3/basic/index/" class="nav-link">åŸºç¡€</a></li><li class="dropdown-item"><!----> <a href="/vue3/reactivity/index/" class="nav-link">reactivity</a></li><li class="dropdown-item"><!----> <a href="/vue3/runtime-core/index/" class="nav-link">runtime-core</a></li><li class="dropdown-item"><!----> <a href="/vue3/runtime-dom/index/" class="nav-link">runtime-dom</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="è¿›é˜¶" class="dropdown-title"><a href="/web/" class="link-title">è¿›é˜¶</a> <span class="title" style="display:none;">è¿›é˜¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/" class="nav-link">Awesome Web</a></li><li class="dropdown-item"><!----> <a href="/node/" class="nav-link">Awesome NodeJS</a></li></ul></div></div><div class="nav-item"><a href="/topic/" class="nav-link">è¯é¢˜</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ›´å¤š" class="dropdown-title"><a href="/nav/" class="link-title">æ›´å¤š</a> <span class="title" style="display:none;">æ›´å¤š</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/nav/" class="nav-link">å¯¼èˆª</a></li><li class="dropdown-item"><!----> <a href="/qa/" class="nav-link">Q&amp;A</a></li><li class="dropdown-item"><!----> <a href="/slides/#/1" class="nav-link">å¹»ç¯ç‰‡</a></li><li class="dropdown-item"><!----> <a href="/about/" class="nav-link">å…³äº</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç´¢å¼•" class="dropdown-title"><a href="/archives/" class="link-title">ç´¢å¼•</a> <span class="title" style="display:none;">ç´¢å¼•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">åˆ†ç±»</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">æ ‡ç­¾</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">å½’æ¡£</a></li></ul></div></div><div class="nav-item"><a href="https://www.jonsam.site" target="_blank" rel="noopener noreferrer" class="nav-link external">
  åšå®¢
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/jonsam-ng/fancy-front-end" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.staticaly.com/gh/jonsam-ng/image-hosting@master/oxygen-space/image.5a0lthv367k0.png"> <div class="blogger-info"><h3>Jonsam NG</h3> <span>è®©æœ‰æ„ä¹‰çš„äº‹å˜å¾—æœ‰æ„æ€ï¼Œè®©æœ‰æ„æ€çš„äº‹å˜å¾—æœ‰æ„ä¹‰</span></div></div> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Reactæºç " class="dropdown-title"><a href="/react/index/" class="link-title">Reactæºç </a> <span class="title" style="display:none;">Reactæºç </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react/index/" class="nav-link">å¼€å§‹ä¸Šæ‰‹</a></li><li class="dropdown-item"><!----> <a href="/react/basic/index/" class="nav-link">åŸºç¡€</a></li><li class="dropdown-item"><!----> <a href="/react/scheduler/index/" class="nav-link">è°ƒåº¦å™¨ï¼ˆSchedulerï¼‰</a></li><li class="dropdown-item"><!----> <a href="/react/updater/index/" class="nav-link">æ›´æ–°å™¨ï¼ˆUpdaterï¼‰</a></li><li class="dropdown-item"><!----> <a href="/react/render/index/" class="nav-link">æ¸²æŸ“å™¨ï¼ˆRenderï¼‰</a></li><li class="dropdown-item"><!----> <a href="/react/update/index/" class="nav-link">æ›´æ–°å‘¨æœŸ</a></li><li class="dropdown-item"><!----> <a href="/react/hooks/index/" class="nav-link">hooks åŸç†</a></li><li class="dropdown-item"><!----> <a href="/react/summary/index/" class="nav-link">æ€»ç»“</a></li><li class="dropdown-item"><!----> <a href="/react/tour/index/" class="nav-link">ğŸ“™ Reactæºç æ¼‚æµè®°</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue3æºç " class="dropdown-title"><a href="/vue3/index/" class="link-title">Vue3æºç </a> <span class="title" style="display:none;">Vue3æºç </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue3/index/" class="nav-link">å¼€å§‹ä¸Šæ‰‹</a></li><li class="dropdown-item"><!----> <a href="/vue3/basic/index/" class="nav-link">åŸºç¡€</a></li><li class="dropdown-item"><!----> <a href="/vue3/reactivity/index/" class="nav-link">reactivity</a></li><li class="dropdown-item"><!----> <a href="/vue3/runtime-core/index/" class="nav-link">runtime-core</a></li><li class="dropdown-item"><!----> <a href="/vue3/runtime-dom/index/" class="nav-link">runtime-dom</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="è¿›é˜¶" class="dropdown-title"><a href="/web/" class="link-title">è¿›é˜¶</a> <span class="title" style="display:none;">è¿›é˜¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/" class="nav-link">Awesome Web</a></li><li class="dropdown-item"><!----> <a href="/node/" class="nav-link">Awesome NodeJS</a></li></ul></div></div><div class="nav-item"><a href="/topic/" class="nav-link">è¯é¢˜</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ›´å¤š" class="dropdown-title"><a href="/nav/" class="link-title">æ›´å¤š</a> <span class="title" style="display:none;">æ›´å¤š</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/nav/" class="nav-link">å¯¼èˆª</a></li><li class="dropdown-item"><!----> <a href="/qa/" class="nav-link">Q&amp;A</a></li><li class="dropdown-item"><!----> <a href="/slides/#/1" class="nav-link">å¹»ç¯ç‰‡</a></li><li class="dropdown-item"><!----> <a href="/about/" class="nav-link">å…³äº</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç´¢å¼•" class="dropdown-title"><a href="/archives/" class="link-title">ç´¢å¼•</a> <span class="title" style="display:none;">ç´¢å¼•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">åˆ†ç±»</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">æ ‡ç­¾</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">å½’æ¡£</a></li></ul></div></div><div class="nav-item"><a href="https://www.jonsam.site" target="_blank" rel="noopener noreferrer" class="nav-link external">
  åšå®¢
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/jonsam-ng/fancy-front-end" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/react/index/" class="sidebar-link">å¼€å§‹ä¸Šæ‰‹</a></li><li><a href="/react/plan/" class="sidebar-link">plan è®¡åˆ’</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>åŸºç¡€</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>è°ƒå’Œï¼ˆReconciliationï¼‰</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>è°ƒåº¦å™¨ï¼ˆSchedulerï¼‰</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æ›´æ–°å™¨ï¼ˆUpdaterï¼‰</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æ¸²æŸ“å™¨ï¼ˆRenderï¼‰</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>hooksåŸç†</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æ€»ç»“</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Reactæºç æ¼‚æµè®°</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/react/tour/index/" class="sidebar-link">å¼€å§‹ä¸Šæ‰‹</a></li><li><a href="/react/tour/plan/" class="sidebar-link">Plan è®¡åˆ’</a></li><li><a href="/react/tour/talk/" class="sidebar-link">å‰è¨€</a></li><li><a href="/react/tour/react-basic-element/" class="sidebar-link">React æºç æ¼‚æµè®°ï¼šReactElement ä¸åŸºç¡€æ¦‚å¿µ</a></li><li><a href="/react/tour/react-basic-children/" class="sidebar-link">React æºç æ¼‚æµè®°ï¼šReactChildren ä¸èŠ‚ç‚¹æ“çºµ</a></li><li><a href="/react/tour/react-basic-glimpse/" class="sidebar-link">React æºç æ¼‚æµè®°ï¼šReact æ•´ä½“ç»“æ„å’Œç†å¿µåˆè®¤è¯†</a></li><li><a href="/react/tour/react-reconciliation-1/" aria-current="page" class="active sidebar-link">React æºç æ¼‚æµè®°ï¼šReact è°ƒå’Œå™¨æ ¸å¿ƒæºç è§£è¯»ï¼ˆä¸€ï¼‰</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/react/tour/react-reconciliation-1/#ç›®å½•" class="sidebar-link">ç›®å½•</a></li><li class="sidebar-sub-header level2"><a href="/react/tour/react-reconciliation-1/#å‰è¨€" class="sidebar-link">å‰è¨€</a></li><li class="sidebar-sub-header level2"><a href="/react/tour/react-reconciliation-1/#updatecontainer-æ˜Ÿæ˜Ÿä¹‹ç«-å¯ä»¥ç‡åŸ" class="sidebar-link">updateContainerï¼šæ˜Ÿæ˜Ÿä¹‹ç«ï¼Œå¯ä»¥ç‡åŸ</a></li><li class="sidebar-sub-header level2"><a href="/react/tour/react-reconciliation-1/#scheduleupdateonfiber-å‰¥ä¸æŠ½èŒ§-è¿½æœ¬æº¯æº" class="sidebar-link">scheduleUpdateOnFiberï¼šå‰¥ä¸æŠ½èŒ§ï¼Œè¿½æœ¬æº¯æº</a></li><li class="sidebar-sub-header level2"><a href="/react/tour/react-reconciliation-1/#ensurerootisscheduled-ä¸€èŠ±å¼€ä¸¤å¶-ç»“æœè‡ªç„¶æˆ" class="sidebar-link">ensureRootIsScheduledï¼šä¸€èŠ±å¼€ä¸¤å¶ï¼Œç»“æœè‡ªç„¶æˆ</a></li><li class="sidebar-sub-header level2"><a href="/react/tour/react-reconciliation-1/#æ‰©å±•" class="sidebar-link">æ‰©å±•</a></li><li class="sidebar-sub-header level2"><a href="/react/tour/react-reconciliation-1/#é—®é¢˜" class="sidebar-link">é—®é¢˜</a></li><li class="sidebar-sub-header level2"><a href="/react/tour/react-reconciliation-1/#æ€»ç»“" class="sidebar-link">æ€»ç»“</a></li></ul></li><li><a href="/react/tour/react-reconciliation-2/" class="sidebar-link">React æºç æ¼‚æµè®°ï¼šReact è°ƒå’Œå™¨æ ¸å¿ƒæºç è§£è¯»ï¼ˆäºŒï¼‰</a></li><li><a href="/react/tour/react-reconciliation-3/" class="sidebar-link">React æºç æ¼‚æµè®°ï¼šReact è°ƒå’Œå™¨æ ¸å¿ƒæºç è§£è¯»ï¼ˆä¸‰ï¼‰</a></li><li><a href="/react/tour/react-reconciliation-4/" class="sidebar-link">React æºç æ¼‚æµè®°ï¼šReact è°ƒå’Œå™¨æ ¸å¿ƒæºç è§£è¯»ï¼ˆå››ï¼‰</a></li><li><a href="/react/tour/react-reconciliation-5/" class="sidebar-link">React æºç æ¼‚æµè®°ï¼šReact è°ƒå’Œå™¨æ ¸å¿ƒæºç è§£è¯»ï¼ˆäº”ï¼‰</a></li><li><a href="/react/tour/react-reconciliation-6/" class="sidebar-link">React æºç æ¼‚æµè®°ï¼šReact è°ƒå’Œå™¨æ ¸å¿ƒæºç è§£è¯»ï¼ˆå…­ï¼‰</a></li><li><a href="/react/tour/react-reconciliation-7/" class="sidebar-link">React æºç æ¼‚æµè®°ï¼šReact è°ƒå’Œå™¨æ ¸å¿ƒæºç è§£è¯»ï¼ˆä¸ƒï¼‰</a></li><li><a href="/react/tour/react-reconciliation-8/" class="sidebar-link">React æºç æ¼‚æµè®°ï¼šReact è°ƒå’Œå™¨æ ¸å¿ƒæºç è§£è¯»ï¼ˆå…«ï¼‰</a></li><li><a href="/react/tour/react-reconciliation-9/" class="sidebar-link">React æºç æ¼‚æµè®°ï¼šReact è°ƒå’Œå™¨æ ¸å¿ƒæºç è§£è¯»ï¼ˆä¹ï¼‰</a></li><li><a href="/react/tour/react-reconciliation-10/" class="sidebar-link">React æºç æ¼‚æµè®°ï¼šReact è°ƒå’Œå™¨æ ¸å¿ƒæºç è§£è¯»ï¼ˆåï¼‰</a></li><li><a href="/react/tour/react-scheduler-1/" class="sidebar-link">React æºç æ¼‚æµè®°ï¼šReact è°ƒåº¦å™¨æ ¸å¿ƒæºç è§£è¯»ï¼ˆä¸€ï¼‰</a></li><li><a href="/react/tour/dr-1/" class="sidebar-link">å¸¦ç€åŸç†é‡è¯» React å®˜æ–¹æ–‡æ¡£ï¼ˆä¸€ï¼‰</a></li><li><a href="/react/tour/dr-2/" class="sidebar-link">å¸¦ç€åŸç†é‡è¯» React å®˜æ–¹æ–‡æ¡£ï¼ˆäºŒï¼‰</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper bg-style-6"><div class="articleInfo-wrap" data-v-e1efabd0><div class="articleInfo" data-v-e1efabd0><ul class="breadcrumbs" data-v-e1efabd0><li data-v-e1efabd0><a href="/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-e1efabd0></a></li> <li data-v-e1efabd0><a href="/categories/?category=react" title="åˆ†ç±»" data-v-e1efabd0>react</a></li><li data-v-e1efabd0><a href="/categories/?category=React%E6%BA%90%E7%A0%81%E6%BC%82%E6%B5%81%E8%AE%B0" title="åˆ†ç±»" data-v-e1efabd0>Reactæºç æ¼‚æµè®°</a></li></ul> <div class="info" data-v-e1efabd0><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-e1efabd0><a href="https://github.com/jonsam-ng" target="_blank" title="ä½œè€…" class="beLink" data-v-e1efabd0>jonsam</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-e1efabd0><a href="javascript:;" data-v-e1efabd0>2022-04-14</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">ç›®å½•</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">React æºç æ¼‚æµè®°ï¼šReact è°ƒå’Œå™¨æ ¸å¿ƒæºç è§£è¯»ï¼ˆä¸€ï¼‰<!----></h1>  <div class="theme-vdoing-content content__default"><div class="badge-group" data-v-ac1337e0><span class="group-tag" data-v-ac1337e0>æ ‡ç­¾ï¼š</span> <span class="badge tip" style="vertical-align:top;" data-v-ac1337e0 data-v-4f7c9f45>React17</span><span class="badge tip" style="vertical-align:top;" data-v-ac1337e0 data-v-4f7c9f45>ç²¾ç®€</span></div> <!----> <h2 id="ç›®å½•"><a href="#ç›®å½•" class="header-anchor">#</a> ç›®å½•</h2> <p></p><div class="table-of-contents"><ul><li><a href="#ç›®å½•">ç›®å½•</a></li><li><a href="#å‰è¨€">å‰è¨€</a></li><li><a href="#updatecontainer-æ˜Ÿæ˜Ÿä¹‹ç«-å¯ä»¥ç‡åŸ">updateContainerï¼šæ˜Ÿæ˜Ÿä¹‹ç«ï¼Œå¯ä»¥ç‡åŸ</a></li><li><a href="#scheduleupdateonfiber-å‰¥ä¸æŠ½èŒ§-è¿½æœ¬æº¯æº">scheduleUpdateOnFiberï¼šå‰¥ä¸æŠ½èŒ§ï¼Œè¿½æœ¬æº¯æº</a></li><li><a href="#ensurerootisscheduled-ä¸€èŠ±å¼€ä¸¤å¶-ç»“æœè‡ªç„¶æˆ">ensureRootIsScheduledï¼šä¸€èŠ±å¼€ä¸¤å¶ï¼Œç»“æœè‡ªç„¶æˆ</a></li><li><a href="#æ‰©å±•">æ‰©å±•</a><ul><li><a href="#æ€ä¹ˆç†è§£-updatecontainer-æ˜¯-å¼•æ“-è¿™ä»¶äº‹">æ€ä¹ˆç†è§£ updateContainer æ˜¯â€œå¼•æ“â€œè¿™ä»¶äº‹ï¼Ÿ</a></li><li><a href="#schedulemicrotask-ä¸-queuemicrotask">scheduleMicrotask ä¸ queueMicrotask</a></li></ul></li><li><a href="#é—®é¢˜">é—®é¢˜</a><ul><li><a href="#ä½è¿ç®—æ€ä¹ˆç†è§£">ä½è¿ç®—æ€ä¹ˆç†è§£ï¼Ÿ</a></li><li><a href="#lanes-ä¼˜å…ˆçº§æ€ä¹ˆç†è§£">lanes ä¼˜å…ˆçº§æ€ä¹ˆç†è§£ï¼Ÿ</a></li><li><a href="#fiberroot-å’Œ-rootfiber-ä»€ä¹ˆå…³ç³»">FiberRoot å’Œ RootFiber ä»€ä¹ˆå…³ç³»ï¼Ÿ</a></li></ul></li><li><a href="#æ€»ç»“">æ€»ç»“</a></li></ul></div><p></p> <h2 id="å‰è¨€"><a href="#å‰è¨€" class="header-anchor">#</a> å‰è¨€</h2> <h2 id="updatecontainer-æ˜Ÿæ˜Ÿä¹‹ç«-å¯ä»¥ç‡åŸ"><a href="#updatecontainer-æ˜Ÿæ˜Ÿä¹‹ç«-å¯ä»¥ç‡åŸ" class="header-anchor">#</a> updateContainerï¼šæ˜Ÿæ˜Ÿä¹‹ç«ï¼Œå¯ä»¥ç‡åŸ</h2> <blockquote><p>updateContainer æ˜¯ç‡åŸçš„ç¬¬ä¸€é¢—ç«æ˜Ÿã€‚</p></blockquote> <p>å…ˆçœ‹ä¸€æ®µä»£ç ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// src/react/packages/react-reconciler/src/ReactFiberReconciler.new.js</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">updateContainer</span><span class="token punctuation">(</span>
  <span class="token comment">// å¾…æŒ‚è½½çš„ç»„ä»¶</span>
  <span class="token literal-property property">element</span><span class="token operator">:</span> ReactNodeList<span class="token punctuation">,</span>
  <span class="token comment">// æŒ‚è½½å®¹å™¨</span>
  <span class="token literal-property property">container</span><span class="token operator">:</span> OpaqueRoot<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> Lane <span class="token punctuation">{</span>
  <span class="token comment">// è·å– RootFiber</span>
  <span class="token keyword">const</span> current <span class="token operator">=</span> container<span class="token punctuation">.</span>current<span class="token punctuation">;</span>
  <span class="token keyword">const</span> eventTime <span class="token operator">=</span> <span class="token function">requestEventTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> lane <span class="token operator">=</span> <span class="token function">requestUpdateLane</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// æ›´æ–° container çš„ context ä¿¡æ¯</span>
  <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token function">getContextForSubtree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// åˆ›å»ºä¸€ä¸ªæ›´æ–°</span>
  <span class="token keyword">const</span> update <span class="token operator">=</span> <span class="token function">createUpdate</span><span class="token punctuation">(</span>eventTime<span class="token punctuation">,</span> lane<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// å°†æ–°å»ºçš„æ›´æ–°å…¥æ ˆ</span>
  <span class="token function">enqueueUpdate</span><span class="token punctuation">(</span>current<span class="token punctuation">,</span> update<span class="token punctuation">,</span> lane<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// è¯·æ±‚ä¸€æ¬¡è°ƒåº¦æ›´æ–°</span>
  <span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token function">scheduleUpdateOnFiber</span><span class="token punctuation">(</span>current<span class="token punctuation">,</span> lane<span class="token punctuation">,</span> eventTime<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> lane<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>å¦‚æœä½ è°ƒè¯•è¿‡ React çš„é¦–æ¬¡æ›´æ–°è¿‡ç¨‹ï¼Œä½ ä¼šçŸ¥é“ React ä¼šèµ°åˆ°è¿™é‡Œã€‚å¦‚æœä½ å¾€å‰è¿½æº¯ updateContainer çš„è°ƒç”¨é“¾æ¡ï¼Œä½ ä¼šå‘ç°è¿™äº›è°ƒåº¦éƒ½æ¥è‡ªäºåº”ç”¨å±‚ APIã€‚é¦–æ¬¡æ¸²æŸ“æ˜¯ä¸€æ¬¡åŒæ­¥æ¸²æŸ“ï¼Œé€šè¿‡ updateContainer è¿™ä¸ªå‡½æ•°ï¼Œåˆ›å»ºç¬¬ä¸€ä¸ª update å¯¹è±¡ï¼Œå°†é¦–ä¸ª update å¯¹è±¡å…¥é˜Ÿåˆ—ï¼Œå‘èµ·é¦–æ¬¡è°ƒåº¦ã€‚å¯ä»¥è¯´ï¼Œè¿™é‡Œæ˜¯ React å¼•æ“çš„ç‚¹ç«å™¨ã€‚</p> <p>æ€»ç»“ä¸€ä¸‹ updateContainer æ ¸å¿ƒåŠŸèƒ½ï¼š</p> <ul><li>åˆå§‹åŒ–åˆ›å»ºä¸€ä¸ªæ›´æ–°å¯¹è±¡ï¼Œå¹¶ä¸”å°†æ›´æ–°åŠ å…¥æ›´æ–°é˜Ÿåˆ—ã€‚</li> <li>è°ƒç”¨ scheduleUpdateOnFiberï¼Œ(å‘è°ƒåº¦å™¨) å‘å‡ºä¸€æ¬¡è°ƒåº¦çš„è¯·æ±‚ã€‚ã€æ³¨ï¼šå‘è°ƒåº¦å™¨æœ‰äº›ä¸å¦¥ï¼Œå› ä¸ºåŒæ­¥ä»»åŠ¡ä¸€èˆ¬ä¸ä¼šç»è¿‡è°ƒåº¦å™¨ï¼Œè¿™é‡Œæš‚ä¸”è¿™ä¹ˆè¡¨è¿°ï¼Œä¾¿äºç†è§£ã€‘</li></ul> <h2 id="scheduleupdateonfiber-å‰¥ä¸æŠ½èŒ§-è¿½æœ¬æº¯æº"><a href="#scheduleupdateonfiber-å‰¥ä¸æŠ½èŒ§-è¿½æœ¬æº¯æº" class="header-anchor">#</a> scheduleUpdateOnFiberï¼šå‰¥ä¸æŠ½èŒ§ï¼Œè¿½æœ¬æº¯æº</h2> <blockquote><p>scheduleUpdateOnFiber ä» FiberTree çš„æç¹å¶èŒ‚ä¸­æ‰¾åˆ°äº†å½“åˆçš„é‚£æšç§å­ã€‚</p></blockquote> <p>åœ¨ updateContainer ä¸­ï¼Œè°ƒç”¨äº† scheduleUpdateOnFiber ä»¥åœ¨ fiberï¼ˆæ­¤å¤„æŒ‡çš„æ˜¯ RootFiberï¼‰ ä¸Šè°ƒåº¦ä¸€æ¬¡æ›´æ–°ï¼Œé‚£ä¹ˆè°ƒåº¦æ›´æ–°æ˜¯å¦‚ä½•åœ¨ fiber ä¸Šå±•å¼€çš„å‘¢ï¼Ÿ</p> <p>é¦–å…ˆæ¥åˆ†æä¸€ä¸‹ä»£ç ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// src/react/packages/react-reconciler/src/ReactFiberWorkLoop.new.js</span>
<span class="token keyword">let</span> <span class="token literal-property property">workInProgressRootRenderPhaseUpdatedLanes</span><span class="token operator">:</span> Lanes <span class="token operator">=</span> NoLanes<span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">mergeLanes</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">a</span><span class="token operator">:</span> Lanes <span class="token operator">|</span> Lane<span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> Lanes <span class="token operator">|</span> Lane</span><span class="token punctuation">)</span><span class="token operator">:</span> Lanes <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">|</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">scheduleUpdateOnFiber</span><span class="token punctuation">(</span>
  <span class="token comment">//  RootFiber</span>
  <span class="token literal-property property">fiber</span><span class="token operator">:</span> Fiber<span class="token punctuation">,</span>
  <span class="token comment">// è°ƒåº¦ä¼˜å…ˆçº§</span>
  <span class="token literal-property property">lane</span><span class="token operator">:</span> Lane<span class="token punctuation">,</span>
  <span class="token literal-property property">eventTime</span><span class="token operator">:</span> number<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> FiberRoot <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token punctuation">{</span>
  <span class="token comment">// æ£€æŸ¥åµŒå¥—æ›´æ–°ï¼Œé˜²æ­¢æ­»å¾ªç¯</span>
  <span class="token function">checkForNestedUpdates</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ä» fiber å‘ä¸Šæ”¶é›† lanesï¼Œrootï¼šFiberRoot = fiber.stateNodeã€‚å¯¹äº updateContainer æ¥è¯´ï¼Œè¿™é‡Œ fiber å°±æ˜¯ RootFiberã€‚</span>
  <span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token function">markUpdateLaneFromFiberToRoot</span><span class="token punctuation">(</span>fiber<span class="token punctuation">,</span> lane<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// æ ‡è®° root å³å°†æ›´æ–°ï¼Œroot.pendingLanes |= lane</span>
  <span class="token function">markRootUpdated</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> lane<span class="token punctuation">,</span> eventTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// å¦‚æœå½“å‰å·²ç»æ˜¯ Render é˜¶æ®µï¼Œä¸” root æ˜¯å¾…å¤„ç†çš„ FiberRootï¼Œè¿™æ—¶è·³è¿‡æ¸²æŸ“çš„è°ƒåº¦è¯·æ±‚ï¼Œå¹¶ä¸”è¿½è¸ª laneï¼ŒåŠ å…¥åˆ° Render é˜¶æ®µçš„ lanesï¼Œå°±åœ¨åœ¨å½“å‰è°ƒåº¦çš„å›è°ƒä¸­å‚ä¸æ¸²æŸ“ï¼Œæˆ–è€…ç­‰å¾…ä¸‹æ¬¡æ¸²æŸ“ã€‚</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    <span class="token punctuation">(</span>executionContext <span class="token operator">&amp;</span> RenderContext<span class="token punctuation">)</span> <span class="token operator">!==</span> NoLanes <span class="token operator">&amp;&amp;</span>
    root <span class="token operator">===</span> workInProgressRoot
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ”¶é›†å½“å‰çš„ lane åˆ° workInProgressRootRenderPhaseUpdatedLanesï¼Œè¡¨ç¤ºåœ¨å½“å‰ render ä¸­å½“å‰æ­£åœ¨æ¸²æŸ“çš„ RootFiber ä¸Šçš„ä¼˜å…ˆçº§é˜Ÿåˆ—ã€‚</span>
    workInProgressRootRenderPhaseUpdatedLanes <span class="token operator">=</span> <span class="token function">mergeLanes</span><span class="token punctuation">(</span>
      workInProgressRootRenderPhaseUpdatedLanes<span class="token punctuation">,</span>
      lane<span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// ç¡®ä¿ FiberRoot å‘èµ·è°ƒåº¦è¯·æ±‚</span>
    <span class="token function">ensureRootIsScheduled</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> eventTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> root<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>å…³æ³¨å…¥å‚çš„ä¼™ä¼´å¯èƒ½å·²ç»å‘ç°ï¼Œè¿™é‡Œä¼ å…¥çš„æ˜¯ fiberï¼Œè¿”å›çš„å’Œä¼ é€’ç»™ ensureRootIsScheduled å‡½æ•°çš„å´æ˜¯ rootã€‚root æ˜¯ FiberRootï¼Œå¹¶ä¸æ˜¯ Fiberã€‚å¯ä»¥æŠŠ FiberRoot ç†è§£ä¸º FiberTree çš„å®¹å™¨ã€‚FiberRoot ä¸ RootFiber åŒå‘ç´¢å¼•ã€‚ä¹‹åä¼šè¯¦ç»†å±•å¼€ã€‚</p> <p>markUpdateLaneFromFiberToRoot å‘ä¸Šæ”¶é›†ä¼˜å…ˆçº§çš„åŒæ—¶å¯»æ‰¾åˆ°äº† FiberRoot å®¹å™¨ï¼Œå› ä¸ºæ¸²æŸ“ä»»åŠ¡çš„è°ƒåº¦æ˜¯ä¾æ‰˜äºå®¹å™¨çš„ï¼Œè€Œé RootFiberã€‚è¿™ä¸ªè¿‡ç¨‹æ›´åƒæ˜¯ä¸€ä¸ªæŠ½ä¸å‰¥èŒ§çš„è¿‡ç¨‹ï¼Œroot æ‰æ˜¯è¢«è°ƒåº¦çš„ç›®æ ‡ã€‚</p> <p>è¿™ä¸ªå‡½æ•°çš„æ ¸å¿ƒåŠŸèƒ½å¦‚ä¸‹ï¼š</p> <ul><li>ä» fiber å‘çˆ¶çº§æ”¶é›† lanesï¼Œå¹¶ä¸”è®¡ç®—å‡º FiberRootã€‚</li> <li>è°ƒç”¨ ensureRootIsScheduledï¼Œç¡®ä¿ FiberRoot å‘èµ·åŒæ­¥æˆ–è€…å¼‚æ­¥è°ƒåº¦ã€‚</li></ul> <h2 id="ensurerootisscheduled-ä¸€èŠ±å¼€ä¸¤å¶-ç»“æœè‡ªç„¶æˆ"><a href="#ensurerootisscheduled-ä¸€èŠ±å¼€ä¸¤å¶-ç»“æœè‡ªç„¶æˆ" class="header-anchor">#</a> ensureRootIsScheduledï¼šä¸€èŠ±å¼€ä¸¤å¶ï¼Œç»“æœè‡ªç„¶æˆ</h2> <blockquote><p>ensureRootIsScheduled æ˜¯å°è£…è°ƒåº¦ä»»åŠ¡çš„åŒçº¿æµæ°´è½¦é—´ã€‚</p></blockquote> <p>åœ¨ä¸Šé¢å¯¹ scheduleUpdateOnFiber çš„åˆ†æä¸­ï¼Œæœ€é‡è¦çš„å°±æ˜¯è°ƒç”¨ ensureRootIsScheduledï¼Œä»¥ä¿è¯åœ¨ fiber æ‰€åœ¨çš„ FiberRoot ä¸Šè°ƒåº¦æ›´æ–°ï¼Œé‚£ä¹ˆ FiberRoot ä¸Šæ˜¯å¦‚ä½•ç»§ç»­è°ƒåº¦çš„å‘¢ï¼Ÿç»§ç»­æ¥çœ‹ä»£ç ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// src/react/packages/react-reconciler/src/ReactFiberWorkLoop.new.js</span>
<span class="token keyword">function</span> <span class="token function">ensureRootIsScheduled</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">root</span><span class="token operator">:</span> FiberRoot<span class="token punctuation">,</span> <span class="token literal-property property">currentTime</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// åœ¨æœ¬æ¬¡è°ƒåº¦ä¹‹å‰çš„å½“å‰çš„è®°å½•çš„å›è°ƒèŠ‚ç‚¹</span>
  <span class="token keyword">const</span> existingCallbackNode <span class="token operator">=</span> root<span class="token punctuation">.</span>callbackNode<span class="token punctuation">;</span>

  <span class="token comment">// è®¡ç®—å°†è¦æ¸²æŸ“çš„ lanes</span>
  <span class="token keyword">const</span> nextLanes <span class="token operator">=</span> <span class="token function">getNextLanes</span><span class="token punctuation">(</span>
    root<span class="token punctuation">,</span>
    root <span class="token operator">===</span> workInProgressRoot <span class="token operator">?</span> workInProgressRootRenderLanes <span class="token operator">:</span> NoLanes<span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// æ— éœ€è¦æ¸²æŸ“çš„ lanesï¼Œç›´æ¥é‡ç½®é€€å‡º</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>nextLanes <span class="token operator">===</span> NoLanes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    root<span class="token punctuation">.</span>callbackNode <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    root<span class="token punctuation">.</span>callbackPriority <span class="token operator">=</span> NoLane<span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// è·å– lanes ä¸­ä¼˜å…ˆçº§æœ€é«˜çš„ lane ä½œä¸ºæœ¬æ¬¡è°ƒåº¦çš„ä¼˜å…ˆçº§</span>
  <span class="token keyword">const</span> newCallbackPriority <span class="token operator">=</span> <span class="token function">getHighestPriorityLane</span><span class="token punctuation">(</span>nextLanes<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// ç”±äºå³å°†è¦ç”Ÿæˆæ–°çš„è°ƒåº¦ï¼Œå…ˆå°†ç°åœ¨çš„è°ƒåº¦èŠ‚ç‚¹ä¸Šçš„å›è°ƒå–æ¶ˆæ‰</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>existingCallbackNode <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">cancelCallback</span><span class="token punctuation">(</span>existingCallbackNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// è®¾ç½®ä¸€ä¸ªæ–°çš„å›è°ƒèŠ‚ç‚¹</span>
  <span class="token keyword">let</span> newCallbackNode<span class="token punctuation">;</span>
  <span class="token comment">// å¦‚æœæ˜¯åŒæ­¥æ›´æ–°ä»»åŠ¡</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>newCallbackPriority <span class="token operator">===</span> SyncLane<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// è¯·æ±‚åŒæ­¥è°ƒåº¦å›è°ƒ performSyncWorkOnRootï¼Œå°†è¯¥å›è°ƒåŠ å…¥åŒæ­¥å›è°ƒé˜Ÿåˆ—</span>
      <span class="token function">scheduleSyncCallback</span><span class="token punctuation">(</span><span class="token function">performSyncWorkOnRoot</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> root<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>supportsMicrotasks<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment">// æ”¯æŒå¾®ä»»åŠ¡çš„æµè§ˆå™¨ä¸ç”¨å†è¯·æ±‚è°ƒåº¦å™¨çš„å›è°ƒ</span>
     <span class="token function">scheduleMicrotask</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span>executionContext <span class="token operator">===</span> NoContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token comment">// æ¶ˆè´¹å®ŒåŒæ­¥å›è°ƒé˜Ÿåˆ—</span>
         <span class="token function">flushSyncCallbacks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// ä¸æ”¯æŒå¾®ä»»åŠ¡åˆ™å‘è°ƒåº¦å™¨è¯·æ±‚å›è°ƒï¼Œä¼˜å…ˆçº§ ImmediatePriorityï¼ˆç«‹å³å›è°ƒï¼‰ï¼Œå›è°ƒåæ‰§è¡Œ flushSyncCallbacks å°†åŒæ­¥å›è°ƒé˜Ÿåˆ—æ¶ˆè´¹å®Œ</span>
      <span class="token function">scheduleCallback</span><span class="token punctuation">(</span>ImmediateSchedulerPriority<span class="token punctuation">,</span> flushSyncCallbacks<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// åŒæ­¥æ›´æ–°æ‰§è¡Œå®Œæ¯•ï¼Œå°† newCallbackNode ç½®ä¸º nullï¼ŒperformSyncWorkOnRoot ä¸ä¼šç”¨åˆ°æ­¤å€¼</span>
    newCallbackNode <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> schedulerPriorityLevel<span class="token punctuation">;</span>
    <span class="token comment">// å°† lanes è½¬åŒ–ä¸ºäº‹ä»¶ä¼˜å…ˆçº§ï¼Œç„¶åå°†äº‹ä»¶ä¼˜å…ˆçº§è½¬åŒ–ä¸ºè°ƒåº¦ä¼˜å…ˆçº§</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token function">lanesToEventPriority</span><span class="token punctuation">(</span>nextLanes<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ç¦»æ•£äº‹ä»¶ä¼˜å…ˆçº§ï¼šImmediateSchedulerPriority</span>
      <span class="token keyword">case</span> <span class="token literal-property property">DiscreteEventPriority</span><span class="token operator">:</span>
        schedulerPriorityLevel <span class="token operator">=</span> ImmediateSchedulerPriority<span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token comment">// è¿ç»­äº‹ä»¶ä¼˜å…ˆçº§ï¼šUserBlockingSchedulerPriority</span>
      <span class="token keyword">case</span> <span class="token literal-property property">ContinuousEventPriority</span><span class="token operator">:</span>
        schedulerPriorityLevel <span class="token operator">=</span> UserBlockingSchedulerPriority<span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token comment">// é»˜è®¤äº‹ä»¶ä¼˜å…ˆçº§ï¼šNormalSchedulerPriority</span>
      <span class="token keyword">case</span> <span class="token literal-property property">DefaultEventPriority</span><span class="token operator">:</span>
        schedulerPriorityLevel <span class="token operator">=</span> NormalSchedulerPriority<span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token comment">// Idle äº‹ä»¶ä¼˜å…ˆçº§ï¼šIdleSchedulerPriority</span>
      <span class="token keyword">case</span> <span class="token literal-property property">IdleEventPriority</span><span class="token operator">:</span>
        schedulerPriorityLevel <span class="token operator">=</span> IdleSchedulerPriority<span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">default</span><span class="token operator">:</span>
        schedulerPriorityLevel <span class="token operator">=</span> NormalSchedulerPriority<span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// å‘è°ƒåº¦å™¨è¯·æ±‚ç›¸åº”ä¼˜å…ˆçº§çš„å¼‚æ­¥å›è°ƒã€ä¹Ÿå¯èƒ½æ˜¯ç«‹å³æ‰§è¡Œçš„ä¼˜å…ˆçº§ã€‘ï¼Œå›è°ƒåæ‰§è¡Œ performConcurrentWorkOnRootï¼ŒScheduler.scheduleCallback è¿”å›è°ƒåº¦çš„ callbackNode(newTask)</span>
    newCallbackNode <span class="token operator">=</span> <span class="token function">scheduleCallback</span><span class="token punctuation">(</span>
      schedulerPriorityLevel<span class="token punctuation">,</span>
      <span class="token function">performConcurrentWorkOnRoot</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> root<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// æ›´æ–° callbackPriority å’Œ callbackNode æ³¨æ„ï¼Œæ­¤æ—¶åªæ˜¯å‘èµ·è°ƒåº¦ï¼Œå›è°ƒå¹¶æœªæ‰§è¡Œ</span>
  root<span class="token punctuation">.</span>callbackPriority <span class="token operator">=</span> newCallbackPriority<span class="token punctuation">;</span>
  root<span class="token punctuation">.</span>callbackNode <span class="token operator">=</span> newCallbackNode<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br></div></div><p>ensureRootIsScheduled å°† FiberRoot ä¸Šçš„è°ƒåº¦ä»»åŠ¡åŒºåˆ†ä¸ºåŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡ã€‚</p> <p>è¿™ä¸ªå‡½æ•°æœ‰ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒä½œç”¨ï¼š</p> <ul><li>æ›´æ–° root çš„ callbackNodeã€callbackPriority å±æ€§ã€‚ä¸‹æ¬¡ ensureRootIsScheduled è¢«è°ƒç”¨ä¼šä½¿ç”¨åˆ°ã€‚</li> <li>åŒæ­¥æ›´æ–°è°ƒåº¦ï¼šè°ƒç”¨ scheduleSyncCallback å°†åŒæ­¥å›è°ƒ performSyncWorkOnRoot æ¨å…¥åŒæ­¥å›è°ƒé˜Ÿåˆ— syncQueueï¼›æ”¯æŒå¾®ä»»åŠ¡çš„ç›´æ¥åœ¨å¾®ä»»åŠ¡çš„å›è°ƒæ‰§è¡Œ flushSyncCallbacksï¼›ä¸æ”¯æŒå¾®ä»»åŠ¡æ—¶ä»¥ ImmediateSchedulerPriority çš„ä¼˜å…ˆçº§å‘è°ƒåº¦å™¨è¯·æ±‚åŒæ­¥å›è°ƒï¼Œå›è°ƒæ—¶æ‰§è¡Œ flushSyncCallbacks æ¶ˆè´¹åŒæ­¥é˜Ÿåˆ—ä¸­æ‰€æœ‰çš„åŒæ­¥å›è°ƒã€‚</li> <li>å¼‚æ­¥æ›´æ–°è°ƒåº¦ï¼šæ ¹æ® nextLanes è®¡ç®—äº‹ä»¶ä¼˜å…ˆçº§ï¼Œå¹¶ä¸”è½¬åŒ–ä¸ºè°ƒåº¦ä¼˜å…ˆçº§ï¼Œä»¥ç›¸åº”çš„è°ƒåº¦ä¼˜å…ˆçº§å‘è°ƒåº¦å™¨å‘èµ·å¼‚æ­¥å›è°ƒï¼Œå›è°ƒæ—¶æ‰§è¡Œ performConcurrentWorkOnRootã€‚</li> <li>æ³¨æ„åŒæ­¥è°ƒåº¦ä¸­è°ƒç”¨äº† scheduleSyncCallbackã€scheduleCallback ä¸¤ä¸ªå‡½æ•°ä¸å¯æ··æ·†ï¼ŒscheduleCallback æ˜¯ Scheduler æä¾›çš„ä¸€ç§åŸºäºä¼˜å…ˆçº§æœºåˆ¶çš„ä»»åŠ¡ï¼ˆå›è°ƒï¼‰è°ƒåº¦æ‰‹æ®µï¼ŒperformSyncWorkOnRoot å’Œ performConcurrentWorkOnRoot æ‰æ˜¯çœŸæ­£è¦é€šè¿‡è°ƒåº¦æ‰§è¡Œçš„ä»»åŠ¡ã€‚åŒæ­¥çš„ä»»åŠ¡é€šè¿‡åŒæ­¥å›è°ƒé˜Ÿåˆ—çš„æ–¹å¼è¿›è¡Œäº†ä¼˜åŒ–å¤„ç†ã€‚scheduleSyncCallback æ˜¯å°†åŒæ­¥çš„ä»»åŠ¡åŠ å…¥åŒæ­¥ä»»åŠ¡é˜Ÿåˆ—ã€‚è°ƒåº¦å™¨ä¸æ˜¯ä¸å¯ç¼ºå°‘çš„ï¼Œå¦‚æœæµè§ˆå™¨æ”¯æŒå¾®ä»»åŠ¡ï¼ŒåŒæ­¥ä»»åŠ¡çš„å¤„ç†å°±å¯ä»¥äº¤ç»™å¾®ä»»åŠ¡å¤„ç†ï¼Œè€Œä¸ç»è¿‡è°ƒåº¦å™¨ã€‚</li></ul> <h2 id="æ‰©å±•"><a href="#æ‰©å±•" class="header-anchor">#</a> æ‰©å±•</h2> <h3 id="æ€ä¹ˆç†è§£-updatecontainer-æ˜¯-å¼•æ“-è¿™ä»¶äº‹"><a href="#æ€ä¹ˆç†è§£-updatecontainer-æ˜¯-å¼•æ“-è¿™ä»¶äº‹" class="header-anchor">#</a> æ€ä¹ˆç†è§£ updateContainer æ˜¯ â€œå¼•æ“ â€œè¿™ä»¶äº‹ï¼Ÿ</h3> <p>æˆ‘ä»¬å¯ä»¥ä» updateContainer çš„è°ƒç”¨æ¥æºæ¥å±•å¼€ä¸‹ã€‚</p> <p>è°ƒç”¨ updateContainer çš„å‡½æ•°åŒ…æ‹¬ï¼š legacyRenderSubtreeIntoContainerã€ReactDOMRoot.prototype.renderã€ReactDOMRoot.prototype.unmountã€hydrateRootã€scheduleRootã€‚ReactDOMRoot æ˜¯ç”± ReactDOM.createRoot åˆ›å»ºçš„ã€‚</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>// åº”ç”¨å±‚ API
legacyRenderSubtreeIntoContainer &lt;- ReactDOM.hydrate
                                 &lt;- ReactDOM.render
                                 &lt;- ReactDOM.unmountComponentAtNode
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ç”±ä¸Šé¢å¯¹å‡½æ•°è°ƒç”¨é“¾çš„åˆ†æå¯ä»¥çœ‹å‡ºï¼ŒupdateContainer ä¸»è¦æ¥æºäºåº”ç”¨å±‚ API çš„è°ƒç”¨ï¼ŒåŠ ä¸Š updateContainer è·Ÿ scheduleUpdateOnFiber çš„å…³ç³»ï¼Œå¯ä»¥çœ‹å‡º updateContainer ç¡®å®æ˜¯é’ˆå¯¹ container è¿™ä¸ªå®¹å™¨ä¸Šçš„è°ƒåº¦æ›´æ–°çš„å…¥å£è€Œå­˜åœ¨çš„ï¼Œè€Œè¿™ä¸ª containerï¼Œå°±æ˜¯ FiberRootã€‚</p> <h3 id="schedulemicrotask-ä¸-queuemicrotask"><a href="#schedulemicrotask-ä¸-queuemicrotask" class="header-anchor">#</a> scheduleMicrotask ä¸ queueMicrotask</h3> <p>ä¸Šæ–‡æˆ‘ä»¬å·²ç»äº†è§£åˆ°æ”¯æŒå¾®ä»»åŠ¡çš„æµè§ˆå™¨ä¼šä½¿ç”¨å¾®ä»»åŠ¡çš„å½¢å¼æ¶ˆè´¹å®Œï¼ˆflushï¼‰åŒæ­¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œé‚£ä¹ˆè¿™ä¸ªå¾®ä»»åŠ¡æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¸‹é¢æ¥å±•å¼€ä¸€ä¸‹ scheduleMicrotask çš„ä»£ç ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> localPromise <span class="token operator">=</span> <span class="token keyword">typeof</span> Promise <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">?</span> Promise <span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token literal-property property">scheduleTimeout</span><span class="token operator">:</span> any <span class="token operator">=</span>
  <span class="token keyword">typeof</span> setTimeout <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">?</span> setTimeout <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token operator">:</span> any<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token literal-property property">scheduleMicrotask</span><span class="token operator">:</span> any <span class="token operator">=</span>
  <span class="token keyword">typeof</span> queueMicrotask <span class="token operator">===</span> <span class="token string">'function'</span>
    <span class="token operator">?</span> queueMicrotask
    <span class="token operator">:</span> <span class="token keyword">typeof</span> localPromise <span class="token operator">!==</span> <span class="token string">'undefined'</span>
    <span class="token operator">?</span> <span class="token parameter">callback</span> <span class="token operator">=&gt;</span>
        localPromise
          <span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>handleErrorInNextTick<span class="token punctuation">)</span>
    <span class="token operator">:</span> scheduleTimeout<span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">handleErrorInNextTick</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// éé˜»å¡å¼æŠ›å‡ºå¼‚å¸¸</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> error<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>ä»€ä¹ˆæ˜¯ queueMicrotaskï¼Ÿ</p> <blockquote><p>queueMicrotask adds the function (task) into a queue and each function is executed one by one (FIFO) after the current task has completed its work and when there is no other code waiting to be run before control of the execution context is returned to the browser's event loop.ã€æ¥è‡ª MDNã€‘</p></blockquote> <p>å¾®ä»»åŠ¡ä½¿ç”¨ queueMicrotaskï¼ŒåŒæ—¶ queueMicrotask å¯ä»¥ç”± Promise æ¥æ¨¡æ‹Ÿï¼Œæˆ–è€…ä½¿ç”¨ setTimeout ä¼˜é›…æ›¿ä»£ã€‚</p> <h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="header-anchor">#</a> é—®é¢˜</h2> <h3 id="ä½è¿ç®—æ€ä¹ˆç†è§£"><a href="#ä½è¿ç®—æ€ä¹ˆç†è§£" class="header-anchor">#</a> ä½è¿ç®—æ€ä¹ˆç†è§£ï¼Ÿ</h3> <p>å…³äº react ä¸­å¸¸è§çš„ä½è¿ç®—ï¼Œåœ¨ä¹‹åçš„æ–‡ç« ä¸­ä¼šå•ç‹¬è¯¦è§£ã€‚æœ¬æ–‡ä¸»è¦ç”¨åˆ°  <code>|</code>  è¿ç®—ï¼ŒæŒ‰ä½æˆ–è¿ç®—çš„è§„åˆ™æ˜¯ï¼šä¸¤ä¸ªä½éƒ½ä¸º 0 æ—¶ï¼Œç»“æœæ‰ä¸º 0ã€‚åœ¨è¿™é‡Œä¸¾å‡ºä¸€ä¸ªä¾‹å­ï¼Œæ–¹ä¾¿å¤§å®¶å¯¹æ–‡ç« çš„  <code>|=</code>  è¿›è¡Œç†è§£ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> NoContext <span class="token operator">=</span> <span class="token number">0b0000</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> BatchedContext <span class="token operator">=</span>  <span class="token number">0b0001</span><span class="token punctuation">;</span> 
<span class="token keyword">const</span> RenderContext <span class="token operator">=</span>  <span class="token number">0b0010</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> executionContext <span class="token operator">=</span> NoContext<span class="token punctuation">;</span>

<span class="token comment">// å¦‚æœç°åœ¨å¼€å§‹ RenderContainerï¼Œè¿›å…¥ Batch é˜¶æ®µ</span>
<span class="token comment">// å¢åŠ æšä¸¾å€¼</span>
executionContext <span class="token operator">|=</span> BatchedContext<span class="token punctuation">;</span> <span class="token comment">// 1</span>

<span class="token comment">// åˆ¤æ–­æ˜¯å¦åœ¨ Batch é˜¶æ®µ</span>
<span class="token comment">// æ¶ˆè´¹æšä¸¾å€¼ï¼š0 è¡¨ç¤ºæ²¡æœ‰æšä¸¾å€¼ï¼Œ1 è¡¨ç¤ºæœ‰æšä¸¾å€¼ã€‚è¿™é‡Œæˆ‘ä»¬ç›´æ¥è·Ÿä¸º 0 çš„ NoContext ä½œæ¯”è¾ƒã€‚</span>
<span class="token punctuation">(</span>executionContext <span class="token operator">&amp;</span> BatchedContext<span class="token punctuation">)</span> <span class="token operator">!==</span> NoContext<span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token comment">// åˆ¤æ–­æ˜¯å¦å¤„äº Render é˜¶æ®µ</span>
<span class="token punctuation">(</span>executionContext <span class="token operator">&amp;</span> RenderContext<span class="token punctuation">)</span> <span class="token operator">!==</span> NoContext<span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="lanes-ä¼˜å…ˆçº§æ€ä¹ˆç†è§£"><a href="#lanes-ä¼˜å…ˆçº§æ€ä¹ˆç†è§£" class="header-anchor">#</a> lanes ä¼˜å…ˆçº§æ€ä¹ˆç†è§£ï¼Ÿ</h3> <p>React ä¸­éœ€è¦åŸºäºä¼˜å…ˆçº§çš„è°ƒåº¦æœºåˆ¶ä»¥åŒºåˆ†ä¸åŒæ¸²æŸ“ä»»åŠ¡çš„è½»é‡ç¼“æ€¥ï¼Œåœ¨ v16 ç‰ˆæœ¬çš„ React ä¸­è¿˜æ˜¯ä½¿ç”¨ expirationTime æ¥ç®¡ç†ä¼˜å…ˆçº§ï¼Œåœ¨ v17 çš„ç‰ˆæœ¬ä¸­åˆ™é‡‡ç”¨äº† lane æ¨¡å‹ï¼Œç›¸æ¯”äº expirationTime æ¨¡å‹ï¼Œlane æ¨¡å‹æœ‰ç€æ›´ä¸ºç»†ç²’åº¦ã€æ•ˆç‡æ›´é«˜çš„ç‰¹æ€§ã€‚å…³äºè°ƒåº¦ä¸ä¼˜å…ˆçº§çš„å†…å®¹ï¼Œä¹‹åçš„æ–‡ç« ä¼šè¯¦è¿°ã€‚</p> <h3 id="fiberroot-å’Œ-rootfiber-ä»€ä¹ˆå…³ç³»"><a href="#fiberroot-å’Œ-rootfiber-ä»€ä¹ˆå…³ç³»" class="header-anchor">#</a> FiberRoot å’Œ RootFiber ä»€ä¹ˆå…³ç³»ï¼Ÿ</h3> <p>åœ¨æœ¬æ–‡ä¸­åå¤æåˆ°äº† FiberRoot å’Œ RootFiberï¼ˆHostRootï¼‰ï¼Œå…³äºä¸¤è€…çš„åŒºåˆ«å¦‚ä¸‹ï¼š</p> <ul><li>FiberRoot å’Œ RootFiber å…·æœ‰åŒå‘é“¾æ¥å…³ç³»ã€‚FiberRoot.current = RootFiberï¼ŒRootFiber.stateNode = FiberRootã€‚</li> <li>FiberRoot æ˜¯ FiberTree çš„å®¹å™¨ï¼Œè®°å½• FiberTree åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­çš„æ•°æ®ã€‚</li> <li>RootFiber æœ¬è´¨ä¸Šæ˜¯ Fiberï¼Œæ˜¯ FiberTree çš„æ ¹èŠ‚ç‚¹ï¼Œæ˜¯ç‰¹æ®Šçš„ Fiberã€‚</li> <li>HostRoot ä¹Ÿå°±æ˜¯ HostRootFiberï¼ŒRootFiber è¢«æ ‡è®°ä¸º HostRootã€‚</li></ul> <p>åœ¨ä¹‹åçš„æ–‡ç« ä¸­ä¼šè¯¦è¿° Fiberã€RootFiber å’Œ FiberRootã€ä»¥åŠ FiberTree çš„ç»“æ„ã€‚</p> <h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="header-anchor">#</a> æ€»ç»“</h2> <p>æ€»ç»“ä¸€ä¸‹æœ¬æ–‡çš„å†…å®¹ï¼š</p> <ul><li>updateContainerï¼šåˆå§‹åŒ–æ›´æ–°ä»»åŠ¡ï¼Œè°ƒç”¨ scheduleUpdateOnFiber å‘å‡ºè°ƒåº¦è¯·æ±‚ã€‚</li> <li>scheduleUpdateOnFiberï¼šæ”¶é›†ä¼˜å…ˆçº§ï¼Œè®¡ç®— FiberRootã€‚è°ƒç”¨ ensureRootIsScheduledï¼Œç¡®ä¿ FiberRoot å‘èµ·åŒæ­¥æˆ–è€…å¼‚æ­¥è°ƒåº¦ã€‚</li> <li>ensureRootIsScheduledï¼šåŒ…è£…åŒæ­¥æ›´æ–°ä»»åŠ¡å’Œå¼‚æ­¥æ›´æ–°ä»»åŠ¡å¹¶é‡‡ç”¨ä¸åŒçš„è°ƒåº¦ç­–ç•¥ã€‚åŒæ­¥æ›´æ–°ä»»åŠ¡å…¥åŒæ­¥ä»»åŠ¡é˜Ÿåˆ—åœ¨å¾®ä»»åŠ¡ä¸­æ‰§è¡Œï¼Œå¼‚æ­¥æ›´æ–°ä»»åŠ¡äº¤ç»™è°ƒåº¦å™¨è¿›è¡Œè°ƒåº¦ä¸å›è°ƒã€‚</li></ul></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/jonsam-ng/fancy-front-end/edit/master/docs/10.react/90.Reactæºç æ¼‚æµè®°/90.react-reconciliation-1.md" target="_blank" rel="noopener noreferrer">ç¼–è¾‘</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">2022/07/22, 14:56:40</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/react/tour/react-basic-glimpse/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">React æºç æ¼‚æµè®°ï¼šReact æ•´ä½“ç»“æ„å’Œç†å¿µåˆè®¤è¯†</div></a> <a href="/react/tour/react-reconciliation-2/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">React æºç æ¼‚æµè®°ï¼šReact è°ƒå’Œå™¨æ ¸å¿ƒæºç è§£è¯»ï¼ˆäºŒï¼‰</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/react/tour/react-basic-glimpse/" class="prev">React æºç æ¼‚æµè®°ï¼šReact æ•´ä½“ç»“æ„å’Œç†å¿µåˆè®¤è¯†</a></span> <span class="next"><a href="/react/tour/react-reconciliation-2/">React æºç æ¼‚æµè®°ï¼šReact è°ƒå’Œå™¨æ ¸å¿ƒæºç è§£è¯»ï¼ˆäºŒï¼‰</a>â†’
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives" class="iconfont icon-bi">æœ€è¿‘æ›´æ–°</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/solid/render/render-by-jsx/"><div>
            æ¸²æŸ“åŸç†ä¹‹ç»„ä»¶ç»“æ„ä¸ JSX ç¼–è¯‘
            <!----></div></a> <span class="date">09-07</span></dt></dl><dl><dd>02</dd> <dt><a href="/solid/plan/"><div>
            è®¡åˆ’è·Ÿè¸ª
            <!----></div></a> <span class="date">09-06</span></dt></dl><dl><dd>03</dd> <dt><a href="/solid/index/"><div>
            å¼€å§‹ä¸Šæ‰‹
            <!----></div></a> <span class="date">09-06</span></dt></dl> <dl><dd></dd> <dt><a href="/archives" class="more">æ›´å¤šæ–‡ç« &gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:jonsam.ng@foxmail.com" title="å‘é‚®ä»¶" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/jonsam-ng" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://www.jonsam.site" title="åšå®¢" target="_blank" class="iconfont icon-mao"></a><a href="https://docs.jonsam.site" title="æ–‡æ¡£" target="_blank" class="iconfont icon-shuben"></a><a href="https://ml.jonsam.site" title="æœºå™¨å­¦ä¹ " target="_blank" class="iconfont icon-code"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="æœ¬ç«™ä¸»é¢˜">Vdoing</a> 
    | Copyright Â© 2022-2022
    <span>Fancy Front End | Made by <a href="https://www.jonsam.site" target="_blank">Jonsam</a> by â¤</span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li><li class="iconfont icon-yuedu">
          é˜…è¯»æ¨¡å¼
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><!----><div></div><!----><div></div><div></div></div></div>
    <script src="/assets/js/app.eb21b6ee.js" defer></script><script src="/assets/js/2.01e091c2.js" defer></script><script src="/assets/js/62.d83f3691.js" defer></script><script src="/assets/js/4.54e60667.js" defer></script><script src="/assets/js/12.71337abb.js" defer></script><script src="/assets/js/10.ac472f43.js" defer></script><script src="/assets/js/11.c50183f9.js" defer></script><script src="/assets/js/8.7cbef5ec.js" defer></script><script src="/assets/js/5.f620477b.js" defer></script>
  </body>
</html>

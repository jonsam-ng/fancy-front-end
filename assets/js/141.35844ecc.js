(window.webpackJsonp=window.webpackJsonp||[]).push([[141],{511:function(a,o,t){"use strict";t.r(o);var v=t(2),_=Object(v.a)({},(function(){var a=this,o=a._self._c;return o("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[o("TimeToRead"),a._v(" "),o("p",[a._v("本节内容主要探讨 tapable 中的一些概念，Hook 的分类，Hook API 初步认识等内容。本节内容将不涉及源代码。")]),a._v(" "),o("h2",{attrs:{id:"目录"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#目录"}},[a._v("#")]),a._v(" 目录")]),a._v(" "),o("p"),o("div",{staticClass:"table-of-contents"},[o("ul",[o("li",[o("a",{attrs:{href:"#目录"}},[a._v("目录")])]),o("li",[o("a",{attrs:{href:"#概念"}},[a._v("概念")])]),o("li",[o("a",{attrs:{href:"#api-分类"}},[a._v("API 分类")])]),o("li",[o("a",{attrs:{href:"#api-概述"}},[a._v("API 概述")])]),o("li",[o("a",{attrs:{href:"#参考"}},[a._v("参考")])])])]),o("p"),a._v(" "),o("h2",{attrs:{id:"概念"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#概念"}},[a._v("#")]),a._v(" 概念")]),a._v(" "),o("p",[a._v("在阅读本章内容中，如下的概念需要我们注意：")]),a._v(" "),o("table",[o("thead",[o("tr",[o("th",[a._v("参数")]),a._v(" "),o("th",[a._v("描述")])])]),a._v(" "),o("tbody",[o("tr",[o("td",[a._v("Hook、钩子")]),a._v(" "),o("td",[a._v("一个注册 callback 的注册中心，在 webpack 中表现为  "),o("code",[a._v("new SyncHook()")])])]),a._v(" "),o("tr",[o("td",[a._v("Callback、hook、function、回调、tap (名词)")]),a._v(" "),o("td",[a._v("注册在 Hook 上的一个回调，在 webpack 中表现为  "),o("code",[a._v("plugin")])])]),a._v(" "),o("tr",[o("td",[a._v("Tap（动词）、注册")]),a._v(" "),o("td",[a._v("“轻拍” 的意思，Callback 在 Hook 上注册的过程")])]),a._v(" "),o("tr",[o("td",[a._v("Call、调用、执行")]),a._v(" "),o("td",[a._v("调用 Hook 上的 Callback 的过程")])])])]),a._v(" "),o("p",[a._v("注意：这里舍弃了  "),o("code",[a._v("发布")]),a._v(" 、 "),o("code",[a._v("订阅")]),a._v(" 、 "),o("code",[a._v("发布订阅中心")]),a._v("  这样的术语，而是使用了  "),o("code",[a._v("触发")]),a._v(" 、 "),o("code",[a._v("注册")]),a._v(" 、 "),o("code",[a._v("注册中心")]),a._v("  的术语，目前是便于理解。")]),a._v(" "),o("h2",{attrs:{id:"api-分类"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#api-分类"}},[a._v("#")]),a._v(" API 分类")]),a._v(" "),o("p",[a._v("根据回调的行为变现不同，可以将 Hook 分成如下类型：")]),a._v(" "),o("table",[o("thead",[o("tr",[o("th",[a._v("类型")]),a._v(" "),o("th",[a._v("官方释义")]),a._v(" "),o("th",[a._v("中文释义")]),a._v(" "),o("th",[a._v("备注")])])]),a._v(" "),o("tbody",[o("tr",[o("td",[a._v("Basic hook (without “Waterfall”, “Bail” or “Loop” in its name)")]),a._v(" "),o("td",[a._v("This hook simply calls every function it tapped in a row.")]),a._v(" "),o("td",[a._v("顺序调用被注册在 Hook 上的所有 Callback")]),a._v(" "),o("td")]),a._v(" "),o("tr",[o("td",[a._v("Waterfall")]),a._v(" "),o("td",[a._v("A waterfall hook also calls each tapped function in a row. Unlike the basic hook, it passes a return value from each function to the next function.")]),a._v(" "),o("td",[a._v("顺序执行 Hook 中的 Callback，将上一个 Callback 的返回值作为参数传递给下一个 Callback")]),a._v(" "),o("td",[a._v("Waterfall 是 “瀑布” 的意思，表示顺序执行各种任务，前一个任务执行完了才会执行下一个回调，而前一个任务的执行结果会作为参数传给下一个任务。")])]),a._v(" "),o("tr",[o("td",[a._v("Bail")]),a._v(" "),o("td",[a._v("A bail hook allows exiting early. When any of the tapped function returns anything, the bail hook will stop executing the remaining ones.")]),a._v(" "),o("td",[a._v("允许提前退出，当任意一个 Callback 返回了结果，Hook 将不再执行后续的 Callback")]),a._v(" "),o("td",[a._v("Bail 是 “保险，保障” 的意思，表示任意一个任务成功处理，就不再执行后续的任务。")])]),a._v(" "),o("tr",[o("td",[a._v("Loop")]),a._v(" "),o("td",[a._v("When a plugin in a loop hook returns a non-undefined value the hook will restart from the first plugin. It will loop until all plugins return undefined.")]),a._v(" "),o("td",[a._v("当 Hook 中某个 Callback 返回了  "),o("code",[a._v("non-undefined")]),a._v("  的值将从头开始重新执行直到所有的 Callback 都返回  "),o("code",[a._v("undefined")]),a._v(" ，")]),a._v(" "),o("td",[a._v("Loop 是 “循环 “的意思，表示如果某个任务返回了非 undefined 的结果就从头重复执行此任务队列，直到所有任务返回 undefined 退出循环。")])])])]),a._v(" "),o("p",[a._v("另外，根据回调是同步的还是异步的，可以将 Hook 分成如下类型：")]),a._v(" "),o("table",[o("thead",[o("tr",[o("th",[a._v("类型")]),a._v(" "),o("th",[a._v("官方释义")]),a._v(" "),o("th",[a._v("中文释义")]),a._v(" "),o("th",[a._v("备注")])])]),a._v(" "),o("tbody",[o("tr",[o("td",[a._v("Sync")]),a._v(" "),o("td",[a._v("A sync hook can only be tapped with synchronous functions (using myHook.tap()).")]),a._v(" "),o("td",[a._v("同步的 Hook 只能注册同步的 Callback，使用  "),o("code",[a._v("Hook.tap()")])]),a._v(" "),o("td",[a._v("同步的")])]),a._v(" "),o("tr",[o("td",[a._v("AsyncSeries")]),a._v(" "),o("td",[a._v("An async-series hook can be tapped with synchronous, callback-based and promise-based functions (using myHook.tap(), myHook.tapAsync() and myHook.tapPromise()). They call each async method in a row.")]),a._v(" "),o("td",[a._v("async-series 的 Hook 可以注册同步的 Callback、基于回调或者基于 Promise 的 Callback。使用  "),o("code",[a._v("Hook.tap()")]),a._v(" 、 "),o("code",[a._v("Hook.tapAsync()")]),a._v(" 、 "),o("code",[a._v("Hook.tapPromise()")]),a._v("  注册 Callback。")]),a._v(" "),o("td",[a._v("Series 是 “串行” 的意思，表示前一个任务执行完了才会执行下一个任务。")])]),a._v(" "),o("tr",[o("td",[a._v("AsyncParallel")]),a._v(" "),o("td",[a._v("An async-parallel hook can also be tapped with synchronous, callback-based and promise-based functions (using myHook.tap(), myHook.tapAsync() and myHook.tapPromise()). However, they run each async method in parallel.")]),a._v(" "),o("td",[a._v("async-parallel 的 Hook 也可以注册基于回调或者基于 Promise 的 Callback。使用  "),o("code",[a._v("Hook.tap()")]),a._v(" 、 "),o("code",[a._v("Hook.tapAsync()")]),a._v(" 、 "),o("code",[a._v("Hook.tapPromise()")]),a._v("  注册 Callback。但是，所有异步的 Callback 将会并行执行。")]),a._v(" "),o("td",[a._v("Parallel 是 “并行” 的意思，有点类似于 Promise.all，表示这些回调同时并行执行。")])])])]),a._v(" "),o("p",[o("code",[a._v("AsyncSeries")]),a._v("  和  "),o("code",[a._v("AsyncParallel")]),a._v("  只针对异步的 Hook，同步的 Hook 永远都是串行执行的。")]),a._v(" "),o("h2",{attrs:{id:"api-概述"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#api-概述"}},[a._v("#")]),a._v(" API 概述")]),a._v(" "),o("ul",[o("li",[a._v("SyncHook")]),a._v(" "),o("li",[a._v("SyncBailHook")]),a._v(" "),o("li",[a._v("SyncWaterfallHook")]),a._v(" "),o("li",[a._v("SyncLoopHook")]),a._v(" "),o("li",[a._v("AsyncParallelHook")]),a._v(" "),o("li",[a._v("AsyncParallelBailHook")]),a._v(" "),o("li",[a._v("AsyncSeriesHook")]),a._v(" "),o("li",[a._v("AsyncSeriesBailHook")]),a._v(" "),o("li",[a._v("AsyncSeriesLoopHook")]),a._v(" "),o("li",[a._v("AsyncSeriesWaterfallHook")]),a._v(" "),o("li",[a._v("HookMap")]),a._v(" "),o("li",[a._v("MultiHook")])]),a._v(" "),o("h2",{attrs:{id:"参考"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[a._v("#")]),a._v(" 参考")]),a._v(" "),o("ul",[o("li",[o("a",{attrs:{href:"https://github.com/webpack/tapable",target:"_blank",rel:"noopener noreferrer"}},[a._v("webpack/tapable: Just a little module for plugins."),o("OutboundLink")],1)])])],1)}),[],!1,null,null,null);o.default=_.exports}}]);